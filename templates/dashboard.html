{% extends "base.html" %}

{% block title %}Dashboard - Time Tracker{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <h1 class="mb-0">Dashboard</h1>
        <p class="lead">Current Cycle: {{ cycle_name }}</p>
    </div>
</div>

<div class="row mb-4">
    <div class="col-md-6">
        <div class="card stats-card p-3">
            <h5>Summary</h5>
            <ul class="list-unstyled mb-0">
                <li><strong>Total Hours:</strong> {{ total_hours }}</li>
                <li><strong>Monthly Goal:</strong> {{ monthly_goal }}</li>
                <li><strong>Remaining Hours:</strong> {{ remaining_hours }}</li>
                <li><strong>Progress:</strong> {{ "%.2f"|format(progress_percentage) }}%</li>
            </ul>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-md-6">
        <div class="card p-3">
            <h5>Recent Entries</h5>
            {% if recent_entries %}
                <ul class="list-group list-group-flush">
                {% for entry in recent_entries %}
                    <li class="list-group-item">
                        {{ entry.date }} - {{ entry.project.name if entry.project else 'No Project' }} - {{ entry.hours }} hours
                    </li>
                {% endfor %}
                </ul>
            {% else %}
                <p>No recent entries.</p>
            {% endif %}
        </div>
    </div>
    <div class="col-md-6">
        <div class="card p-3">
            <h5>Daily Totals</h5>
            {% if daily_totals %}
                <ul class="list-group list-group-flush">
                {% for day in daily_totals %}
                    <li class="list-group-item">
                        {{ day.date }}: {{ day.total_hours }} hours
                    </li>
                {% endfor %}
                </ul>
            {% else %}
                <p>No daily totals available.</p>
            {% endif %}
        </div>
    </div>
</div>

<footer>
    <a href="{{ url_for('entries') }}" class="btn btn-primary">View All Entries</a>
</footer>
{% endblock %}
